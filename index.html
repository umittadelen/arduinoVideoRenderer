<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Serial Video Sender</title>
    <link rel="stylesheet" href="./css/styles.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
</head>

<body>
    <h1>Serial Video Sender</h1>
    <p id="info">Make sure to upload the <span class="linkspan"
            onclick="window.location.href='https://github.com/umittadelen/arduinoVideoRenderer/blob/main/receive/receive.ino'">arduino
            code</span> first.<br>(preview mode also available)</p>
    
    <div class="video-input-container">
        <label for="videoInput" class="file-btn">Choose Video</label>
        <input type="file" id="videoInput" accept="video/*,image/*">
        <input id="fileName" placeholder="No file chosen">
    </div>

    <label class="custom-select-label"><span id="ditheringSpan">Dithering:</span>
        <div class="custom-select">
            <select id="ditherType">
                <option value="floyd">Floyd-Steinberg</option>
                <option value="sierraLite">Sierra Lite</option>
                <option value="atkinson">Atkinson</option>
                <option value="jarvisJudiceNinke">Jarvis Judice Ninke</option>
                <option value="stucki">Stucki</option>
                <option value="interleavedGradientNoise">IGN</option>
                <option value="bayer2x2">Bayer 2x2</option>
                <option value="bayer3x3">Bayer 3x3</option>
                <option value="bayer4x4">Bayer 4x4</option>
                <option value="bayer8x8">Bayer 8x8</option>
                <option value="huePattern">Hue Pattern</option>
                <option value="line">line</option>
                <option value="random">random</option>
                <option value="threshold10">Threshold 10%</option>
                <option value="threshold25">Threshold 25%</option>
                <option value="threshold33">Threshold 33%</option>
                <option value="threshold50">Threshold 50%</option>
                <option value="threshold75">Threshold 75%</option>
                <option value="none">none</option>
            </select>

            <div class="custom-select-trigger" tabindex="0">
                <canvas class="preview-canvas" width="42" height="36"></canvas>
                <span class="selected-label"></span>
            </div>

            <div class="custom-options"></div>
        </div>
    </label>

    <div class="horizontal-flex">
        <label class="size-label"><span>Baud Rate:</span><input type="number" id="BaudRate" value="115200"
                placeholder="BAUD_RATE in .ino"></label>
        <label class="size-label"><span>Width:</span><input type="number" id="screenWidth" value="128" min="8"></label>
        <label class="size-label"><span>Height:</span><input type="number" id="screenHeight" value="64" min="8"></label>
        <label class="size-label"><span>FPS:</span><input type="number" id="framesPerSecond" value="60" min="1"></label>
    </div>

    <div class="horizontal-flex">
        <button id="connectSerial">Connect Serial</button>
        <button id="start">Start Streaming</button>
        <button id="screenCapture">Capture Screen</button>
        <button id="stop">Stop</button>
        <button id="restart">Restart</button>
        <div class="checkbox-container">
            <div id="textSwitch" class="text-switch">
                <span class="switch-option on">ON</span>|<span class="switch-option off active">OFF</span>
                <span class="toggle-label">Loop</span>
            </div>
        </div>
        <div class="checkbox-container">
            <label class="custom-checkbox-label">
                <input type="checkbox" id="hidpiSwitch" checked>
                <span class="custom-checkbox"></span>
                <span class="toggle-label">HiDPI Canvas Fix</span>
            </label>
        </div>
    </div>

    <video id="video" width="320" controls style="display:none"></video>

    <div class="horizontal-flex">
        <label class="size-label canvas-label"><span>Original:</span><canvas id="canvas" width="128"
                height="64"></canvas></label>
        <label class="size-label canvas-label"><span>Preview:</span><canvas id="preview-canvas" width="128"
                height="64"></canvas></label>
    </div>

    <canvas id="mikuCanvas" width="112" height="105"></canvas>

    <pre id="log"></pre>
    <script type="module" src="./js/dither.js"></script>
    <script type="module" src="./js/ditheringSelect.js"></script>
    <script type="module" src="./js/main.js"></script>
    <script src="./js/miku.js"></script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5340331733632234" crossorigin="anonymous"></script>
</body>

</html>